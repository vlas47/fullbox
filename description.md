# Fullbox на Django

## Стек и окружение
- Python 3.12, Django 6.0.
- Виртуальное окружение `.venv` в корне проекта; зависимости в `requirements.txt`.
- База: по умолчанию SQLite (`fullbox/db.sqlite3`); при наличии `DB_NAME/USER/PASSWORD/HOST/PORT` переключается на PostgreSQL.

## Структура
- `fullbox/manage.py` и пакет `fullbox/` — настройки, маршруты, вью для dev-логина и кабинетов.
- Приложения:
  - `sku` - модели клиентов/рынков/складов/SKU, админка, список SKU (таблица/карточки), поисковые подсказки, сортировка и фильтры по столбцам, загрузка исходных таблиц.
  - `orders` - журнал заявок, карточка заявки, акты приемки и размещения, история и комментарии.
  - `todo` - задачи: канбан в кабинетах, карточка задачи, комментарии и файлы, маршруты на заявки.
  - `client_cabinet` - кабинет клиента, формы заявок, номенклатура клиента.
  - `sklad` - кабинет кладовщика.
  - `audit` - аудит событий по заявкам.
  - `employees` - модель сотрудников с ролями и админкой, поле факсимиле для подписей.
  - `stockmap` - карта склада и паллетных мест.
- Шаблоны общего назначения: лендинг (`/`), dev-кабинет (`/dev/`), меню быстрого входа и кабинеты ролей.

## Функциональность SKU
- Таблица/карточки с переключением без потери параметров.
- Поиск по артикулу/названию/ШК + подсказки (живые).
- Сортировка по заголовкам столбцов.
- Выпадающие фильтры в заголовках (основные поля), вертикальные границы ячеек для читаемости.

## Кабинеты и задачи
- Кабинеты ролей (клиент, менеджер, кладовщик, главный менеджер, директор) с единым стилем и 3-колоночной сеткой.
- Канбан задач с подсветкой задач текущего исполнителя, карточка задачи с файлами и комментариями.

## Заявки и акты
- Журнал заявок `/orders/` и карточка заявки с историей, участниками и комментариями.
- Акт приемки и акт размещения с табличной частью, автосохранением черновика, формированием коробов/палет.
- Печатные формы: HTML "Акт приемки" и "МХ-1" для печати, с итогами и подписями.

## Сканеры
- Настройка сканеров `/scanner-settings/` с Web Serial (COM) и инструкциями для Proton IMS-2290HD_K.

## Данные и загрузка
- Исходные таблицы `fb_*.xlsx` лежат в каталоге `Начальные таблицы/` (рядом с проектом).
- Команда загрузки: `python manage.py load_initial_tables --base-path "<путь к каталогу>"` (по умолчанию берет `../Начальные таблицы`).

## Запуск локально
```
python -m venv .venv
.venv\Scripts\activate
pip install -r requirements.txt
python fullbox/manage.py migrate
python fullbox/manage.py runserver
```

## Развертывание/поддержка
- В prod используются env: `DJANGO_SECRET_KEY`, `DJANGO_DEBUG`, `DJANGO_ALLOWED_HOSTS`, `DB_*`.
- Репозиторий: `git@github.com:vlas47/fullbox.git` (ветка `main`).
