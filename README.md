# Fullbox

Внутренний портал фулфилмента/склада для задач, заявок и номенклатуры. Проект построен на Django и покрывает ключевые процессы: номенклатура, заявки на приемку, аудит, кабинеты сотрудников и клиентов.

## Основные возможности
- Номенклатура SKU: каталог, поиск по артикулу/названию/ШК, карточный и табличный режимы.
- Заявки: единый раздел `/orders/` с вкладками; приемка с таблицей позиций, документами и комментарием.
- Задачи: постановка и контроль задач по срокам (Просрочены/Сегодня/Скоро) с карточкой, комментариями и файлами.
- Кабинеты ролей: отдельные кабинеты для менеджера, кладовщика и других сотрудников, плюс кабинет клиента.
- Процесс приемки: менеджер подтверждает заявку и отправляет на склад, кладовщик оформляет акт приемки и акт размещения.
- Акты: акт приемки (в т.ч. с расхождениями) и акт размещения по коробам/палетам.
- Печатные формы: HTML "Акт приемки" и "МХ-1" с печатью и подписями.
- Карта склада: карта паллетных мест и детальный вид ряда основного склада.
- Факсимиле сотрудников: загрузка PNG для подписей документов.
- Единый вход: логины сотрудников и клиентов через `/login/`, выход через `/logout/`.
- Аудит: журнал изменений SKU и журнал действий по заявкам.

## Модули
- `sku` — номенклатура (SKU, штрихкоды, фото, привязки).
- `orders` — раздел заявок и вкладки.
- `todo` - задачи (постановщик/исполнитель/наблюдатель, комментарии, вложения).
- `client_cabinet` - кабинет клиента, список клиентов, формы и действия по клиентам.
- `employees` - роли сотрудников и их кабинеты, факсимиле для подписей.
- `sklad` - кабинет кладовщика и задачи склада.
- `audit` - аудит действий по SKU и заявкам.
- `stockmap` - карта склада и паллетных мест.

## Полезные страницы
- `/login/` — вход.
- `/logout/` — выход.
- `/orders/` - заявки (журнал, приемка, обработка, отгрузка, прочее).
- `/todo/` - задачи.
- `/client/` - клиенты.
- `/sku/` - номенклатура.
- `/employees/` - сотрудники.
- `/audit/` и `/audit/orders/` - журнал SKU и заявок.
- `/team-manager/` - кабинет менеджера.
- `/sklad/` - кабинет кладовщика.
- `/head-manager/` - кабинет главного менеджера.
- `/scanner-settings/` - настройка сканеров.
- `/stockmap/` - карта склада.
- `/orders/receiving/<id>/act/` - акт приемки.
- `/orders/receiving/<id>/act/print/` - печатная форма акта приемки.
- `/orders/receiving/<id>/act/mx1/print/` - печатная форма МХ-1.
- `/orders/receiving/<id>/placement/` - акт размещения.

## Локальный запуск
1. Создать и активировать виртуальное окружение.
2. Установить зависимости:
   ```bash
   pip install -r requirements.txt
   ```
3. Задать переменные окружения (см. ниже).
4. Применить миграции:
   ```bash
   python fullbox/manage.py migrate
   ```
5. Запустить сервер:
   ```bash
   python fullbox/manage.py runserver
   ```

## Переменные окружения
Минимальный набор:
```
SECRET_KEY=...
DEBUG=0
DJANGO_ALLOWED_HOSTS=localhost,127.0.0.1
DB_NAME=fullbox
DB_USER=fullbox
DB_PASSWORD=...
DB_HOST=127.0.0.1
DB_PORT=5432
```

## Медиа
Файлы (вложения задач и документы заявок) сохраняются в `MEDIA_ROOT` и отдаются через `MEDIA_URL`. Для продакшена требуется настройка nginx на `/media/`.

## Деплой
Подробная инструкция: `DEPLOY.md`.
